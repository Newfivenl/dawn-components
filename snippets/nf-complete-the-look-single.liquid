
<style>
    .nf-complete-the-look-single__header {
        font-weight: bold;
        margin-bottom: 10px;
    }

    #nf-complete-the-look-single__content {
        display: flex;
        font-size: 13px;
        line-height: 19px;
    }

    #nf-complete-the-look-single__content > div:first-child {
        margin-right: 10px;
    }

    #nf-complete-the-look-single__content .product-form__buttons {
        margin-top: 10px;
    }

    #nf-complete-the-look-single img {
        width: 100px;
        height: 140px;
    }

   

</style>

<div id="nf-complete-the-look-single__content">
    <div>
        <img src="{{ product.featured_image | img_url: 'master' }}" alt="" loading="lazy" />
    </div>
    <div>
        <span>{{product.title}}</span>
        {% render 'price', product: card_product, price_class: '' %}

        {% unless product.has_only_default_variant %}
        {% capture sizes %}
        {%- for variant in product.variants -%}
        {{ product.title | handleize }} | {{variant.id}} | {{variant.title | downcase }} | {{variant.available}}
        {% if forloop.last == false %}::{% endif%}
        {%- endfor -%}
        {% endcapture %}
        {% endunless %}

        {% assign sizes_array = sizes | split: '::'  %}

        <div class="select">
            <select id="variant_sizes_select"
              class="select__select">

                <option  selected disabled>Select</option>
                {% for size in sizes_array %}
                {% assign size_val = size | split: '|' %}
                {% assign product_title =  size_val[0] | join: ', '%} 
                {% assign variant_id =  size_val[1] | join: ', '%} 
                {% assign variant_title =  size_val[2] | join: ', '%} 
                {% assign variant_available =  size_val[3] | join: ', '%} 

                <option value="{{ variant_id | strip }}">
                  {{ variant_title | strip}}
                </option>

              {%- endfor -%}
            </select>
            {% render 'icon-caret' %}
        </div>

        <div class="product-form__buttons">
            <product-form>
                {%- form 'product', product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
                  <input type="hidden" id="variant-id" name="id" value="{{ product.selected_or_first_available_variant.id }}" disabled>
                  <button
                    id="{{ product_form_id }}-submit"
                    type="submit"
                    name="add"
                    class="quick-add__submit button button--full-width button--primary"
                    aria-haspopup="dialog"
                    aria-labelledby="{{ product_form_id }}-submit title-{{ section_id }}-{{ product.id }}"
                    aria-live="polite"
                    data-sold-out-message="true"
                    {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
                  >
                    <span>
                      {%- if product.selected_or_first_available_variant.available -%}
                        {{ 'products.product.add_to_cart' | t }}
                      {%- else -%}
                        {{ 'products.product.sold_out' | t }}
                      {%- endif -%}
                    </span>
                    <span class="sold-out-message hidden">
                      {{ 'products.product.sold_out' | t }}
                    </span>
                    <div class="loading-overlay__spinner hidden">
                      <svg aria-hidden="true" focusable="false" role="presentation" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                        <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                      </svg>
                    </div>
                  </button>
                {%- endform -%}
              </product-form>
          </div>
          
    </div>
</div>

<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        function selectVariantSize(){
            document.querySelector("#variant_sizes_select").addEventListener('change', (event) => {
                const variantId = event.target.value;
                const variantQuantity = 1;
                var $addToCartBtn = document.querySelector("product-form #variant-id");
                $addToCartBtn.setAttribute('value', variantId);
            });
        }
        selectVariantSize();
    });
</script>